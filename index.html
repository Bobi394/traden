<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trading Anfrage senden</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto;max-width:820px;margin:32px auto;padding:16px}
    label{display:block;margin-top:12px}
    input,textarea,button{width:100%;padding:8px;margin-top:6px}
    #result{background:#f6f6f6;padding:10px;border-radius:8px;margin-top:10px;white-space:pre-line}
    .hint{font-size:0.9rem;color:#666}
    #copyBtn{margin-top:8px}
  </style>
</head>
<body>
  <h1>Trading Anfrage senden ğŸ“¨ğŸ®</h1>
  <p class="hint">Gib deinen Roblox-Namen, was du bekommen willst und was du gibst. Nach dem Absenden bekommst du deine persÃ¶nliche ID, mit der du spÃ¤ter chatten kannst!</p>

  <label>Roblox Name
    <input id="robloxName" placeholder="z.B. CoolPlayer123" />
  </label>

  <label>Was du mÃ¶chtest
    <input id="wants" placeholder="z.B. Six Seven" />
  </label>

  <label>Was du gibst
    <input id="gives" placeholder="z.B. La Grande Combinasion" />
  </label>

  <label>Nachricht
    <textarea id="message" rows="3" placeholder="Kurz etwas dazu..."></textarea>
  </label>

  <button id="sendBtn">Anfrage senden âœ‰ï¸</button>
  <div id="result"></div>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script>
    // Deine Firebase Config ğŸ”¥
    const firebaseConfig = {
      apiKey: "AIzaSyAJO1E-U1VCQRXlMjHUrP5312ozqH2gL6w",
      authDomain: "traden-996a7.firebaseapp.com",
      databaseURL: "https://traden-996a7-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "traden-996a7",
      storageBucket: "traden-996a7.firebasestorage.app",
      messagingSenderId: "891291590181",
      appId: "1:891291590181:web:b3738e6144a685728d69cc",
      measurementId: "G-2BT2JP06XH"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const sendBtn = document.getElementById('sendBtn');
    const resultDiv = document.getElementById('result');
    let lastSent = 0; // Anti-Spam Timer

    function genId(){
      const a = crypto.getRandomValues(new Uint32Array(2));
      return (a[0].toString(36)+a[1].toString(36)).slice(0,8);
    }

    sendBtn.onclick = async ()=>{
      const now = Date.now();
      if (now - lastSent < 30000) { // 30 Sekunden Cooldown
        alert("â³ Bitte warte etwas, bevor du eine neue Anfrage sendest!");
        return;
      }

      const robloxName=document.getElementById('robloxName').value.trim();
      const wants=document.getElementById('wants').value.trim();
      const gives=document.getElementById('gives').value.trim();
      const message=document.getElementById('message').value.trim();
      if(!robloxName||!wants||!gives){
        alert('Bitte alle Felder ausfÃ¼llen!');
        return;
      }

      const id=genId();
      const data={id,createdAt:Date.now(),robloxName,wants,gives,message,status:'pending'};
      await db.ref('requests/'+id).set(data);
      lastSent = now;

      const redeemLink = "https://bobi394.github.io/traden/reedem.html"; // Dein echter Link
      resultDiv.innerHTML = `
        âœ… <b>Anfrage gesendet!</b><br><br>
        <b>Deine Anfrage-ID:</b> <span id="idText">${id}</span><br>
        <button id="copyBtn">ğŸ“‹ ID kopieren</button><br><br>
        ğŸ”— <b>Chat-Seite:</b> <a href="${redeemLink}" target="_blank">${redeemLink}</a><br><br>
        ğŸ’¡ Speichere deine ID gut ab! Du brauchst sie, wenn deine Anfrage akzeptiert wurde.
      `;

      document.getElementById("copyBtn").onclick = () => {
        const text = document.getElementById("idText").innerText;
        navigator.clipboard.writeText(text);
        document.getElementById("copyBtn").textContent = "âœ… ID kopiert!";
        setTimeout(() => document.getElementById("copyBtn").textContent = "ğŸ“‹ ID kopieren", 2000);
      };
    };
  </script>
</body>
</html>